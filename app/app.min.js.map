{"version":3,"sources":["app.js","services/notifyService.js","routes.js","controllers/AdminController.js","controllers/BaseController.js","controllers/EditVideoSourceController.js","controllers/FetchByTitleController.js","controllers/HomeController.js","controllers/MetadataFetcherController.js","controllers/NavbarController.js","controllers/PlayController.js","controllers/SearchController.js","controllers/VideoInfoController.js","controllers/VideoSourcesController.js","services/VideoService.js","services/VideoSourceService.js","services/adminService.js","services/apiService.js","services/globalsService.js","services/libs.js","services/refreshImageService.js","services/uniqueIdService.js","services/util.js","directives/confirmDirective.js","directives/focusDirective.js","directives/jwplayerDirective.js","directives/videoTileDirective.js","validators/pathExistsValidator.js","validators/urlExistsValidator.js"],"names":[],"mappings":"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","file":"app.min.js","sourcesContent":["angular.module('app', ['ui.router', 'ui.bootstrap', 'infinite-scroll'])\n        .run(['$rootScope', 'enums', 'globals', function($rootScope, enums, globals) {\n                $rootScope.enums = enums;\n                $rootScope.globals = globals;\n            }]);\n\nfetchConstants().then(bootstrapApplication);\n\n\n/**\n * Load constants asynchronously BEFORE bootstrapping the application\n * @returns {unresolved}\n */\nfunction fetchConstants() {\n    var injector = angular.injector([\"ng\"])\n    var $http = injector.get(\"$http\");\n    var $q = injector.get('$q');\n\n    var promises = [\n        $q(function(resolve, reject) {\n            $http.get('api/GetEnumerations.php').then(function(result) {\n                angular.module('app').constant(\"enums\", result.data);\n                resolve();\n            }, reject);\n        })\n    ];\n\n    return $q.all(promises);\n}\n\nfunction bootstrapApplication() {\n    angular.element(document).ready(function() {\n        angular.bootstrap(document, [\"app\"]);\n    });\n}","angular.module('app').service('notify', function() {\n    return notify;\n});\n\n function notify(message, type) {\n        type = type ? type : 'warning';\n        //if danger was provided, convert to error\n        type = type === 'danger' ? 'error' : type;\n        \n        return new PNotify({\n            title: '',\n            text: message,\n            styling: 'bootstrap3',\n            type: type\n        });\n    }","angular.module('app')\n        .config(['$stateProvider', '$urlRouterProvider',\n            function($stateProvider, $urlRouterProvider) {\n                $urlRouterProvider.otherwise('/home');\n\n                $stateProvider\n                        .state('home', {\n                            url: '/home',\n                            templateUrl: 'app/partials/home.html',\n                            controller: 'HomeController',\n                            controllerAs: 'vm'\n                        })\n                        .state('admin', {\n                            url: '/admin',\n                            templateUrl: 'app/partials/admin.html',\n                            controller: 'AdminController',\n                            controllerAs: 'vm'\n                        })\n                        .state('videoInfo', {\n                            url: '/videoInfo/{videoId:int}',\n                            templateUrl: 'app/partials/videoInfo.html',\n                            controller: 'VideoInfoController',\n                            controllerAs: 'vm'\n                        })\n                        .state('videoSources', {\n                            url: '/videoSources',\n                            templateUrl: 'app/partials/videoSources.html',\n                            controller: 'VideoSourcesController',\n                            controllerAs: 'vm'\n                        })\n                        .state('editVideoSource', {\n                            url: '/editVideoSource/{id:int}',\n                            parent: 'videoSources',\n                            templateUrl: 'app/partials/editVideoSource.html',\n                            controller: 'EditVideoSourceController',\n                            controllerAs: 'vm'\n                        })\n                        .state('play', {\n                            url: '/play/{videoId:int}?{showVideoId:int}',\n                            templateUrl: 'app/partials/play.html',\n                            controller: 'PlayController',\n                            controllerAs: 'vm'\n                        })\n                        .state('search', {\n                            url: '/search?q',\n                            templateUrl: 'app/partials/search.html',\n                            controller: 'SearchController',\n                            controllerAs: 'vm'\n                        })\n                        .state('metadataFetcher', {\n                            url: '/metadataFetcher/{videoId:int}',\n                            templateUrl: 'app/partials/metadataFetcher.html',\n                            controller: 'MetadataFetcherController',\n                            controllerAs: 'vm'\n                        }) \n            }])\n\n        .run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\n                $rootScope.$state = $state;\n                $rootScope.$stateParams = $stateParams;\n            }])","angular.module('app').controller('AdminController', ['$timeout', '$window', 'globals', 'api', 'notify', 'Video', 'admin',\n    function($timeout, $window, globals, api, notify, Video, admin) {\n        globals.title = 'Admin';\n\n        var vm = angular.extend(this, {\n            //properties\n            serverVersionNumber: undefined,\n            //api\n            fetchMissingMetadata: fetchMissingMetadata,\n            generateLibrary: generateLibrary,\n            updateApplication: updateApplication\n        });\n\n\n        getVideoCounts();\n        getServerVersionNumber();\n\n        function generateLibrary() {\n            var n = notify('Generating library', 'info');\n            globals.generateLibraryIsPending = true;\n            api.generateLibrary().then(function() {\n                notify('Library has been generated', 'success');\n            }).catch(function(err) {\n                notify('There was an error generating the library: \"' + err.message + '\"', 'danger');\n            }).finally(function() {\n                globals.generateLibraryIsPending = false;\n                getVideoCounts();\n            });\n        }\n\n        function getServerVersionNumber() {\n            admin.getServerVersionNumber().then(function(version) {\n                vm.serverVersionNumber = version;\n            });\n        }\n        function getVideoCounts() {\n            Video.getCounts().then(function(videoCounts) {\n                vm.videoCounts = videoCounts;\n            });\n        }\n\n        function fetchMissingMetadata() {\n            globals.fetchMissingMetadataIsPending = true;\n            notify('Fetching missing metadata', 'info');\n            Video.fetchMissingMetadata().then(function() {\n                notify('Finished fetching missing metata for videos', 'success');\n            }, function() {\n                notify('There was an error fetching missing metadata', 'error');\n            }).finally(function() {\n                globals.fetchMissingMetadataIsPending = false;\n            });\n        }\n\n        function updateApplication() {\n            globals.checkForUpdatesIsPending = true;\n            notify('Checking for updates. Please wait until this operation has completed', 'info');\n            admin.updateApplication().then(function(result) {\n                if (result.updateWasApplied) {\n                    notify('Application has been updated. Reloading page.', 'success');\n                    $timeout(function() {\n                        $window.location.reload();\n                    }, 4000);\n                } else {\n                    notify('No updates were found', 'success');\n                }\n            }, function() {\n                notify('Unable to check and install updates', 'error');\n            }).finally(function() {\n                globals.checkForUpdatesIsPending = false;\n            });\n        }\n    }]);","angular.module('app').controller('BaseController', ['globals',function(globals) {\n        var vm = angular.extend(this, {\n            globals: globals\n        });\n        \n    }]);","angular.module('app').controller('EditVideoSourceController', [\n    '$scope', 'globals', 'VideoSource', '$state', '$stateParams', 'enums',\n    function($scope, globals, VideoSource, $state, $stateParams, enums) {\n        var vm = angular.extend(this, {\n            isLoading: false,\n            isSaving: false,\n            //properties\n            originalVideoSource: undefined,\n            videoSource: {\n                securityType: enums.securityType.public,\n            },\n            //api\n            reset: reset,\n            save: save,\n            sayHi: function() {\n                alert('hi');\n            }\n        });\n\n        globals.title = 'Edit Video Source';\n        vm.originalVideoSource = angular.copy(vm.videoSource);\n        loadVideoSource();\n\n        function loadVideoSource() {\n            //if an id was provided, go look up the settings for that videoSource\n            if ($stateParams.id && $stateParams.id > 0) {\n                vm.isLoading = true;\n                VideoSource.getById($stateParams.id).then(function(videoSource) {\n                    vm.videoSource = videoSource;\n                    vm.originalVideoSource = angular.copy(videoSource);\n                }).finally(function() {\n                    vm.isLoading = false;\n                });\n            }\n        }\n\n        function reset() {\n            vm.videoSource = vm.originalVideoSource;\n            vm.form.setPristine(true);\n        }\n\n        function save() {\n            vm.isSaving = true;\n            VideoSource.save(vm.videoSource).then(function(videoSource) {\n                vm.isSaving = false;\n                loadVideoSource();\n                notify('Saved video source', 'success');\n                $state.go('videoSources', {}, {reload: true});\n            }, function() {\n                //handle the error\n                vm.isSaving = false;\n            });\n        }\n    }]);","angular.module('app').controller('FetchByTitleController', ['$stateParams',\n    function($stateParams) {\n        var vm = angular.extend(this, {\n            //properties\n            title: undefined\n                    //api\n\n        });\n\n        vm.title = $stateParams.title;\n\n    }]);","angular.module('app').controller('HomeController', ['globals', 'Video', function(globals, Video) {\n        var vm = angular.extend(this, {\n            allVideos: [],\n            currentlyLoadedVideos: [],\n            //api\n            loadMore: loadMore\n        });\n        globals.title = 'Home';\n\n        Video.getAll().then(function(videos) {\n            vm.allVideos = videos;\n        });\n\n        function loadMore() {\n            var numberToLoad = globals.infiniteScrollPageSize;\n            var beginIndex = vm.currentlyLoadedVideos.length;\n            var endIndex = beginIndex + numberToLoad;\n            //if the end index is larger than the list of all videos, change the end index to the length of the list of all videos\n            endIndex = endIndex > vm.allVideos.length ? vm.allVideos.length : endIndex;\n\n            for (var i = beginIndex; i < endIndex; i++) {\n                vm.currentlyLoadedVideos.push(vm.allVideos[i]);\n            }\n        }\n\n    }]);","angular.module('app').controller('MetadataFetcherController', ['$scope', '$q', 'globals', 'refreshImage', 'Video', '$state', '$stateParams', 'notify', 'enums',\n    function($scope, $q, globals, refreshImage, Video, $state, $stateParams, notify, enums) {\n        globals.title = 'Fetch Metadata';\n        var vm = angular.extend(this, {\n            searchByOptions: {\n                onlineVideoId: 'onlineVideoId',\n                title: 'title'\n            },\n            videoId: $stateParams.videoId,\n            searchBy: 'onlineVideoId',\n            isSearching: false,\n            metadataIsBeingFetched: false,\n            textboxLabel: undefined,\n            //this is the value (title, onlineVideoId) to use to search for the metadata\n            searchValue: undefined,\n            searchResults: undefined,\n            video: {},\n            //api\n            search: search,\n            calculateTextboxLabel: calculateTextboxLabel,\n            fetchMetadataByOnlineVideoId: fetchMetadataByOnlineVideoId\n        });\n\n        $scope.$watch('vm.searchBy', searchByChanged);\n\n        $scope.$watch('vm.video', vm.calculateTextboxLabel);\n\n        function searchByChanged() {\n            vm.calculateTextboxLabel();\n            if (vm.searchBy === vm.searchByOptions.title) {\n                vm.searchValue = vm.video.title;\n            } else {\n                vm.searchValue = '';\n            }\n        }\n\n        function calculateTextboxLabel() {\n            vm.textboxLabel = undefined;\n\n            if (!vm.video) {\n                return;\n            }\n            if (vm.searchBy === vm.searchByOptions.title) {\n                vm.textboxLabel = 'Title';\n            } else {\n                vm.textboxLabel = vm.video.mediaType === enums.mediaTypeMovie ? 'TMDB ID' : 'TVDB ID';\n            }\n        }\n\n        //load the video\n        Video.getById(vm.videoId).then(function(video) {\n            angular.extend(vm.video, video);\n            searchByChanged()\n        });\n\n        Video.getPathInfo(vm.videoId).then(function(video) {\n            angular.extend(vm.video, video);\n        });\n\n        function search() {\n            vm.isSearching = true;\n            var promise;\n            if (vm.searchBy === vm.searchByOptions.title) {\n                promise = Video.getMetadataSearchResultsByTitle(vm.video.mediaType, vm.searchValue);\n            } else {\n                promise = Video.getMetadataSearchResultsByOnlineVideoId(vm.video.mediaType, vm.searchValue);\n            }\n            promise.then(function(searchResults) {\n                vm.metadataResults = searchResults;\n                vm.isSearching = false;\n            });\n        }\n\n        function fetchMetadataByOnlineVideoId(onlineVideoId) {\n            vm.metadataIsBeingFetched = true;\n            Video.fetchMetadata(vm.video.videoId, onlineVideoId).then(function() {\n                return Video.getById(vm.video.videoId);\n            }).then(function(video) {\n                //refresh the posters so that when we go back to videoInfo, the poster cache has been cleared\n                return refreshImage(video.sdPosterUrl).then(function() {\n                    return refreshImage(video.hdPosterUrl);\n                }).then(function(){\n                    //there was an issue getting the browser to refresh the cached images. try reloading the page (after we have \n                    //navigated to the videoInfo page)\n                    setTimeout(function(){\n                        window.location.reload();\n                    }, 200);\n                    return undefined;\n                });\n            }).then(function() {\n                vm.metadataResults = undefined;\n                vm.metadataIsBeingFetched = false;\n\n                notify('Updated video with selected metadata', 'success');\n                $state.go('videoInfo', {videoId: vm.videoId});\n            })['catch'](function(err) {\n                vm.metadataIsBeingFetched = false;\n                notify('There was an error fetching metadata for the video you selected: ' + err, 'error');\n            })\n        }\n\n\n    }]);","angular.module('app').controller('NavbarController', ['$state', function($state) {\n        var vm = angular.extend(this, {\n            searchTerm: undefined,\n            navbarIsOpen: false,\n            //api\n            search: search,\n            hideNavbar: hideNavbar,\n            toggleNavbar: toggleNavbar\n        });\n\n        function search() {\n            if (vm.searchTerm && vm.searchTerm.trim().length > 0) {\n                $state.go('search', {q: vm.searchTerm});\n                vm.searchTerm = undefined;\n                hideNavbar();\n            }\n        }\n\n        function showNavbar() {\n            vm.navbarIsOpen = true;\n        }\n\n        function hideNavbar() {\n            vm.navbarIsOpen = false;\n        }\n\n        function toggleNavbar() {\n            vm.navbarIsOpen ? hideNavbar() : showNavbar();\n        }\n\n    }]);","angular.module('app').controller('PlayController', ['$scope', 'globals', '$stateParams', 'notify',\n    function($scope, globals, $stateParams, notify) {\n        globals.title = 'Play';\n        globals.hideNavbar = true;\n        \n        var vm = angular.extend(this, {\n            videoId: $stateParams.videoId,\n            showVideoId: $stateParams.showVideoId\n        });\n\n        $scope.$on(\"$destroy\", function() {\n           globals.hideNavbar = false;\n        });\n    }]);","angular.module('app').controller('SearchController', ['globals', 'Video', '$stateParams', function(globals, Video, $stateParams) {\n        var vm = angular.extend(this, {\n            allVideos: [],\n            currentlyLoadedVideos: [],\n            searchTerm: $stateParams.q,\n            //api\n            loadMore: loadMore\n        });\n\n        globals.title = 'Home';\n        var searchTerm = $stateParams.q;\n\n        Video.search(searchTerm).then(function(videos) {\n            vm.allVideos = videos;\n        });\n\n\n        function loadMore() {\n            var numberToLoad = globals.infiniteScrollPageSize;\n            var beginIndex = vm.currentlyLoadedVideos.length;\n            var endIndex = beginIndex + numberToLoad;\n            //if the end index is larger than the list of all videos, change the end index to the length of the list of all videos\n            endIndex = endIndex > vm.allVideos.length ? vm.allVideos.length : endIndex;\n\n            for (var i = beginIndex; i < endIndex; i++) {\n                var video = vm.allVideos[i];\n                vm.currentlyLoadedVideos.push(video);\n            }\n        }\n\n    }]);","angular.module('app').controller('VideoInfoController', ['$scope', 'globals', 'Video', '$state', '$stateParams', 'enums',\n    function($scope, globals, Video,$state,  $stateParams, enums) {\n        var vm = angular.extend(this, {\n            progressPercent: 0,\n            preventCache: $stateParams.preventCache,\n            episodes: undefined,\n            videoId: $stateParams.videoId,\n            //api\n            getProgressPercentType: getProgressPercentType,\n            navigateToShow: navigateToShow\n        });\n        globals.title = 'VideoInfo';\n\n        $scope.$watch('vm.episodes', fetchAllEpisodePercentWatched);\n\n        //load the video by id\n        Video.getById(vm.videoId).then(function(video) {\n            vm.video = video;\n\n            if (vm.video.mediaType === enums.mediaType.show) {\n                //get all of the episodes for this show\n                Video.getEpisodes(vm.video.videoId).then(function(episodes) {\n                    vm.episodes = episodes;\n                    //find the next episode that should be watched\n                }).then(function() {\n                    return Video.getNextEpisode(vm.video.videoId);\n                    //select the episode in our local list of episodes that matches the next episode\n                }).then(function(nextEpisode) {\n                    vm.nextEpisode = _.where(vm.episodes, {videoId: nextEpisode.videoId})[0];\n                    //figure out how much of this episode has been watched\n                }).then(function() {\n                    return Video.getProgressPercent(vm.nextEpisode.videoId);\n                    //save the percentWatched to the episode\n                }).then(function(percent) {\n                    vm.nextEpisode.percentWatched = percent;\n                });\n            }\n\n            //load the progress of this video\n            Video.getProgressPercent(vm.video.videoId).then(function(percent) {\n                vm.progressPercent = percent;\n            });\n\n        })\n\n        /**\n         * Grabs the percent watched for every episode\n         * @returns {undefined}\n         */\n        function fetchAllEpisodePercentWatched() {\n            var videoIds = _.pluck(vm.episodes, 'videoId');\n            Video.getProgressPercentMultiple(videoIds).then(function(percentObjects) {\n                for (var i in percentObjects) {\n                    var percentObj = percentObjects[i];\n                    var episode = _.where(vm.episodes, {videoId: percentObj.videoId})[0];\n                    if (episode) {\n                        episode.percentWatched = percentObj.percent;\n                    }\n                }\n            });\n        }\n\n        function getProgressPercentType() {\n            if (vm.progressPercent < 40) {\n                return'danger';\n            } else if (vm.progressPercent < 99) {\n                return 'warning';\n            } else if (vm.progressPercent < 101) {\n                return 'success';\n            }\n        }\n\n        function navigateToShow() {\n            Video.getShowFromEpisodeId(vm.videoId).then(function(show) {\n                $state.go('videoInfo', {videoId: show.videoId});\n            });\n        }\n    }]);","angular.module('app').controller('VideoSourcesController', ['globals', 'VideoSource', 'notify',\n    function(globals, VideoSource, notify) {\n        var vm = this;\n        vm.editIsVisible = false;\n        vm.deleteVideoSource = deleteVideoSource;\n        vm.refresh = loadVideoSources;\n\n        globals.title = 'Video Sources';\n        loadVideoSources();\n        \n        function loadVideoSources() {\n            VideoSource.getAll().then(function(videoSources) {\n                vm.videoSources = videoSources;\n            });\n        }\n\n        function deleteVideoSource(id) {\n            VideoSource.deleteById(id).then(loadVideoSources);\n        }\n    }]);","angular.module('app').service('Video', ['$http', '$q', '_', function($http, $q, _) {\n        function Video() {\n\n        }\n\n        Video.search = function(searchTerm) {\n            var deferred = $q.defer();\n            $http.get('api/GetSearchResults.php', {params: {q: searchTerm}}).success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        Video.getAll = function() {\n            return $q(function(resolve, reject) {\n                $http.get('api/GetLibrary.php').success(function(data) {\n                    resolve(data);\n                });\n            });\n        };\n\n        Video.getById = function(id) {\n            var deferred = $q.defer();\n            if (!_.isNumber(id)) {\n                deferred.reject();\n            } else {\n                $http.get('api/GetVideo.php?videoId=' + id).success(function(data) {\n                    deferred.resolve(data);\n                }).error(function() {\n                    deferred.reject(data);\n                });\n            }\n            return deferred.promise;\n        };\n\n        Video.getEpisodes = function(showId) {\n            var deferred = $q.defer();\n            $http.get('api/GetTvEpisodes.php?videoId=' + showId).success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        Video.getNextEpisode = function(showId) {\n            var deferred = $q.defer();\n            $http.get('api/GetNextEpisode.php?videoId=' + showId).success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        /**\n         * Get how much percentage watched this video is\n         * @param {type} videoId\n         * @returns {$q@call;defer.promise}\n         */\n        Video.getProgressPercent = function(videoId) {\n            var deferred = $q.defer();\n            $http.get('api/GetVideoProgressPercent.php', {params: {videoId: videoId}})\n                    .success(function(result) {\n                        deferred.resolve(result.percent);\n                    })\n                    .error(deferred.reject);\n            return deferred.promise;\n        };\n\n        /**\n         * Get how much percentage watched each video is\n         * @param {type} videoId\n         * @returns {$q@call;defer.promise}\n         */\n        Video.getProgressPercentMultiple = function(videoIds) {\n            videoIds = _.isArray(videoIds) ? videoIds : [];\n            var deferred = $q.defer();\n            $http.get('api/GetVideoProgressPercentMultiple.php', {\n                params: {\n                    videoIds: videoIds.join(',')\n                }\n            }).success(function(result) {\n                deferred.resolve(result);\n            }).error(deferred.reject);\n            return deferred.promise;\n        };\n\n        /**\n         * Get the number of seconds into a video the current user is. \n         * @param {type} videoId\n         * @returns {$q@call;defer.promise}\n         */\n        Video.getProgress = function(videoId) {\n            var deferred = $q.defer();\n            $http.get('api/GetVideoProgress.php', {params: {\n                    videoId: videoId\n                }}).success(function(data) {\n                deferred.resolve(data.startSeconds);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        }\n\n        Video.setProgress = function(videoId, seconds, isFinished) {\n            isFinished = isFinished === true ? true : false;\n\n            var deferred = $q.defer();\n            $http.get('api/SetVideoProgress.php', {params: {\n                    videoId: videoId,\n                    seconds: seconds,\n                    finished: isFinished\n                }}).success(function(data) {\n                if (data.success) {\n                    deferred.resolve();\n                } else {\n                    deferred.reject();\n                }\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        }\n\n        Video.getCounts = function() {\n            var deferred = $q.defer();\n            $http.get('api/GetVideoCounts.php').success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        Video.fetchMetadata = function(videoId, onlineVideoId) {\n            var deferred = $q.defer();\n            $http.get('api/FetchVideoMetadata.php', {params: {videoId: videoId, onlineVideoId: onlineVideoId}}).success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        Video.getMetadataSearchResultsByTitle = function(mediaType, title) {\n            var deferred = $q.defer();\n            $http.get('api/GetMetadataSearchResults.php', {\n                params: {\n                    mediaType: mediaType,\n                    title: title\n                }\n            }).success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        }\n        Video.getMetadataSearchResultsByOnlineVideoId = function(mediaType, onlineVideoId) {\n            var deferred = $q.defer();\n            $http.get('api/GetMetadataSearchResults.php', {\n                params: {\n                    mediaType: mediaType,\n                    onlineVideoId: onlineVideoId\n                }\n            }).success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        }\n\n        Video.getPathInfo = function(videoId) {\n            var deferred = $q.defer();\n            $http.get('api/GetVideoPathInfo.php?videoId=' + videoId)\n                    .success(function(video) {\n                        deferred.resolve(video);\n                    })\n                    .error(function() {\n                        deferred.reject();\n                    });\n            return deferred.promise;\n        }\n\n        Video.getShowFromEpisodeId = function(episodeId) {\n            var deferred = $q.defer();\n            $http.get('api/GetTvShowByEpisodeId.php?videoId=' + episodeId)\n                    .success(function(video) {\n                        deferred.resolve(video);\n                    })\n                    .error(function() {\n                        deferred.reject();\n                    });\n            return deferred.promise;\n        }\n\n        /**\n         * Finds a poster and metadata for every video in the library that does not have one yet.\n         * @returns {$q@call;defer.promise}\n         */\n        Video.fetchMissingMetadata = function() {\n            var deferred = $q.defer();\n            $http.get('api/FetchMissingMetadataAndPosters.php')\n                    .success(function(result) {\n                        deferred.resolve(result);\n                    })\n                    .error(function() {\n                        deferred.reject();\n                    });\n            return deferred.promise;\n        }\n        return Video;\n    }]);","angular.module('app').service('VideoSource', ['$http', '$q', function($http, $q) {\n        function VideoSource() {\n\n        }\n\n        VideoSource.getAll = function() {\n            var deferred = $q.defer();\n            $http.get('api/GetVideoSources.php').success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        VideoSource.getById = function(id) {\n            var deferred = $q.defer();\n            $http.get('api/GetVideoSourceById.php?id=' + id).success(function(data) {\n                deferred.resolve(data);\n            }).error(function() {\n                deferred.reject();\n            });\n            return deferred.promise;\n        };\n\n        VideoSource.save = function(videoSource) {\n            return $q(function(resolve, reject) {\n                $http.post('api/PostVideoSource.php', videoSource).then(function(result) {\n                    resolve(result.data);\n                }, reject);\n            });\n        };\n\n        VideoSource.deleteById = function(id) {\n            return $q(function(resolve, reject) {\n                $http.delete('api/DeleteVideoSource.php', {data: {id: id}}).then(function(result) {\n                    resolve(result.data);\n                }, reject);\n            });\n        };\n\n        return VideoSource;\n    }]);","angular.module('app').service('admin', ['$http', '$q', '_', function($http, $q, _) {\n        return {\n            getServerVersionNumber: getServerVersionNumber,\n            updateApplication: updateApplication\n        };\n\n        /**\n         * Finds a poster and metadata for every video in the library that does not have one yet.\n         * @returns {$q@call;defer.promise}\n         */\n        function getServerVersionNumber() {\n            var deferred = $q.defer();\n            $http.get('api/GetServerVersionNumber.php')\n                    .success(function(result) {\n                        deferred.resolve(result);\n                    })\n                    .error(function() {\n                        deferred.reject();\n                    });\n            return deferred.promise;\n        }\n\n        /**\n         * Checks for updates to this application and updates if there are any.\n         * @returns {undefined}\n         */\n        function updateApplication() {\n            var deferred = $q.defer();\n            $http.get('api/Update.php')\n                    .success(function(result) {\n                        if (result.success === true) {\n                            deferred.resolve(result);\n                        } else {\n                            deferred.reject(result);\n                        }\n                    })\n                    .error(function(err) {\n                        deferred.reject(err);\n                    });\n            return deferred.promise;\n        }\n    }]);","angular.module('app').service('api', ['$q', '$http', function($q, $http) {\n        return {\n            generateLibrary: generateLibrary\n        };\n\n        function generateLibrary() {\n            return $q(function(resolve, reject) {\n                $http.get('api/GenerateLibrary.php')\n                        .success(function(result) {\n                            if (result.success) {\n                                resolve();\n                            } else {\n                                reject();\n                            }\n                        })\n                        .error(function() {\n                            reject();\n                        })\n\n            });\n        }\n    }]);","angular.module('app').service('globals', [function() {\n        return {\n            pageTitle: 'PlumMediaCenter',\n            hideNavbar: false,\n            infiniteScrollPageSize: 25,\n            //whenever the admin page launches a metadata fetch, keep track of its status here. \n            fetchMissingMetadataIsPending: false,\n            generateLibraryIsPending: false,\n            checkForUpdatesIsPending: false\n        };\n    }]);","angular.module('app').service('_', function(){\n    return window._;\n});","/**\n * Takes an image url and refreshes that image so that the browser cache can be refreshed\n * @param {type} param1\n * @param {type} param2\n */\nangular.module('app').service('refreshImage', ['$q', function($q) {\n        function refreshImage(uri) {\n            var deferred = $q.defer();\n            var reload = function() {\n                // Force a reload of the iframe\n                this.contentWindow.location.reload(true);\n\n                // Remove `load` event listener and remove iframe\n                this.removeEventListener('load', reload, false);\n                this.parentElement.removeChild(this);\n\n               deferred.resolve();\n            };\n\n            var iframe = document.createElement('iframe');\n            iframe.style.display = 'none';\n\n            // Reload iframe once it has loaded\n            iframe.addEventListener('load', reload, false);\n\n            // Only call callback if error occured while loading\n            iframe.addEventListener('error', deferred.reject, false);\n            iframe.src = uri;\n            document.body.appendChild(iframe);\n            return deferred.promise;\n        }\n\n        return refreshImage;\n    }]);","angular.module('app').service('uniqueId', [function() {\n        var counter = 0;\n        return function() {\n            counter++;\n            return 'element-' + counter;\n        }\n    }]);","angular.module('app').service('util', ['_', function(_) {\n        return {\n            blankItemInPlace: blankItemInPlace\n        };\n\n        function blankItemInPlace(item) {\n            if (_.isArray(item)) {\n                while (item.length > 0) {\n                    item.pop();\n                }\n            } else {\n                for (var i in item) {\n                    delete item[i];\n                }\n            }\n        }\n    }]);","angular.module('app').directive('confirm', [function() {\n        return {\n            restrict: 'A',\n            link: function(scope, element, attributes, controller) {\n                element.on('click', function() {\n                    var message = scope.$eval(attributes.confirmMessage);\n                    message = message? message: 'Are you sure you want to do that?';\n                    //show the confirm modal\n                    var confirmed = confirm(message);\n                    if (confirmed) {\n                        scope.$eval(attributes.confirm);\n                    }\n                });\n            }\n        }\n\n    }]);","angular.module('app').directive('focus', ['$timeout', '$parse', function($timeout, $parse) {\n        return {\n            restrict: 'A',\n            link: function($scope, element, attributes, controller) {\n                $scope.$watch(function() {\n                    return $scope.$eval(attributes.focus);\n                }, function(focus) {\n                    if (focus === true) {\n                        $timeout(function() {\n                            element[0].focus();\n                            getter = $parse(attributes.focus);\n                            //override the value with a false now that we have performed the focus\n                            getter.assign($scope, false);\n                        });\n                    }\n                });\n            }\n        }\n\n    }]);","angular.module('app').directive('jwplayer', ['uniqueId', function(uniqueId) {\n        return {\n            restrict: 'E',\n            replace: true,\n            controllerAs: 'vm',\n            controller: ['Video', '$scope', 'util', Controller],\n            bindToController: true,\n            scope: {\n                videoId: '='\n            },\n            link: function(scope, element, attributes, vm) {\n                vm.elementId = element.attr('id');\n                vm.playlist = [{file: 'http://localhost:8080/videos/movies/A%20Good%20Day%20to%20Die%20Hard/A%20Good%20Day%20to%20Die%20Hard.mp4'}];\n                if (!vm.elementId) {\n                    vm.elementId = uniqueId();\n                }\n\n                element.attr('id', vm.elementId);\n\n                //TODO - implement the keyboard shortcuts\n                function keyboardShortcuts(e) {\n                    switch (e.which) {\n                        case 32://spacebar key\n                            //toggle playback\n                            jwplayer().play();\n                            break;\n                        case 70: //f key\n                            //toggle fullscreen\n                            if (player.getFullscreen() === true) {\n                                player.setFullscreen(false);\n                            } else {\n                                player.setFullscreen(true);\n                            }\n                            break;\n                        case 39: //right arrow key\n                            //seek forward n seconds\n                            var position = player.getPosition();\n                            var newPosition = position + seekBurstSeconds;\n                            if (position <= seekPosition) {\n                                newPosition = seekPosition + seekBurstSeconds;\n                            }\n                            seekPosition = newPosition;\n                            player.seek(seekPosition);\n                            break;\n                        case 37: //left arrow key\n                            //seek backwards n seconds\n                            var position = player.getPosition();\n                            var newPosition = position - seekBurstSeconds;\n                            if (position >= seekPosition) {\n                                newPosition = seekPosition - seekBurstSeconds;\n                            }\n                            seekPosition = newPosition;\n                            player.seek(seekPosition);\n                            break;\n                    }\n                }\n            },\n            template: '<div class=\"jwplayer\"></div>'\n        }\n\n        function Controller(Video, $scope, util) {\n            var vm = this;\n            angular.extend(this,\n                    {\n                        play: play,\n                        pause: pause,\n                        playlist: [],\n                        loadVideo: loadVideo,\n                        togglePlayback: togglePlayback\n                    }\n            );\n            var startSeconds = 0;\n            //keeps track of the number of seconds that have passed since the video has saved its position in the database\n            var playPositionUpdateTime = new Date();\n\n            //load the video\n            Video.getById(vm.videoId).then(function(video) {\n                //get the current progress of this video.\n                Video.getProgress(vm.videoId).then(function(seconds) {\n                    vm.video = video;\n                    startSeconds = seconds;\n                });\n            });\n\n            $scope.$watch('vm.video', vm.loadVideo);\n\n            //when the directive is removed, remove the jwplayer from the page\n            $scope.$on('$destroy', function() {\n                jwplayer(vm.elementId).remove();\n            });\n\n            /**\n             * Toggles the play/pause state. if playing, the player pauses. if paused, the player plays.\n             */\n            function togglePlayback() {\n                vm.player.play();\n            }\n\n            /**\n             * Tells the player to play. If already playing, playback continues. \n             * if paused, the player starts playing.\n             */\n            function play() {\n                vm.player.play(true);\n            }\n\n            /**\n             * Pauses the player. If the player is playing, playback is paused. \n             * if the player is paused, the player stays paused.\n             */\n            function pause() {\n                vm.player.pause(false);\n            }\n\n            function loadVideo(video) {\n                //empty the playlist \n                util.blankItemInPlace(vm.playlist);\n                if (!video) {\n                    return;\n                }\n                //add the video to the playlist\n                vm.playlist.push({\n                    file: video.url,\n                    image: video.posterUrl,\n                    title: video.title,\n                    video: video\n                });\n\n                if (vm.jwplayer) {\n                    vm.player.load(vm.playlist);\n                } else {\n                    //the jwplayer has not yet been created, create it now\n                    jwplayer(vm.elementId).setup({\n                        flashplayer: 'lib/jwplayer-6.11/jwplayer.flash.swf',\n                        primary: 'html5',\n                        playlist: vm.playlist,\n                        startparam: 'start',\n                        wmode: 'transparent',\n                        width: '100%',\n                        height: '100%',\n                        events: {\n                            onTime: onTime,\n                            onPlay: onPlay,\n                            onComplete: onComplete\n                        },\n                        autostart: true\n                    });\n                    vm.player = jwplayer(vm.elementId);\n                }\n            }\n\n            var startVideoWhereWeLeftOffProcessed = false;\n            /**\n             * Event that is called every time the video changes time position. This may be called up to \n             * 10 times a second\n             */\n            function onTime(obj) {\n                if (startVideoWhereWeLeftOffProcessed === false && obj.position > 0) {\n                    startVideoWhereWeLeftOffProcessed = true;\n                    startVideoWhereWeLeftOff();\n                    return;\n                }\n\n                var positionInSeconds = obj.position;\n                //every so often, update the database with the current video's play position\n                var nowTime = new Date();\n                var timeSinceLastUpdate = nowTime - playPositionUpdateTime;\n                if (timeSinceLastUpdate > 5000) {\n                    playPositionUpdateTime = new Date();\n                    Video.setProgress(vm.video.videoId, positionInSeconds);\n                }\n            }\n            \n            function onComplete(){\n                console.debug('Finished playing video ' + vm.video.videoId);\n                Video.setProgress(vm.video.videoId, -1, true);\n            }\n\n            /**\n             * Seeks to the playback position indicated by the database. This should only be called ONCE, \n             * and only after the video has started playing\n             */\n            function startVideoWhereWeLeftOff() {\n                //seek the player to the startPosition\n                //if a startSeconds value greater than 0 was provided, seek to that position in the video\n                if (startSeconds > 0) {\n                    vm.player.seek(startSeconds);\n                    console.debug('seeking to ', startSeconds);\n                }\n            }\n\n            /**\n             * Event that is fired every time the video starts playing\n             */\n            function onPlay() {\n                playPositionUpdateTime = new Date();\n            }\n\n        }\n    }]);","angular.module('app').directive('videoTile', [function() {\n        return {\n            restrict: 'E',\n            controllerAs: 'vm',\n            controller: [Controller],\n            bindToController: true,\n            scope: {\n                video: '='\n            },\n            templateUrl: 'app/directives/videoTileDirective.html'\n        }\n\n        function Controller() {\n            \n        }\n    }]);","angular.module('app').directive('pathExistsValidator', function($http, $q) {\n    return {\n        require: 'ngModel',\n        link: function(scope, element, attrs, ngModel) {\n            ngModel.$asyncValidators.pathExists = function(modelValue, viewValue) {\n                var value = modelValue || viewValue;\n                return $http.get('api/GetPathExistsOnServer.php', {params: {path: value}}).then(\n                        function(response) {\n                            if (!response.data.exists === true) {\n                                return $q.reject(response.data.errorMessage);\n                            }\n                            return true;\n                        }\n                );\n            };\n        }\n    };\n});","angular.module('app').directive('urlExistsValidator', function($http, $q) {\n    return {\n        require: 'ngModel',\n        link: function(scope, element, attrs, ngModel) {\n            ngModel.$asyncValidators.urlExists = function(modelValue, viewValue) {\n                var value = modelValue || viewValue;\n                return $http.get('api/GetUrlExists.php', {params: {url: value}}).then(\n                        function(response) {\n                            if (!response.data.exists === true) {\n                                return $q.reject(response.data.errorMessage);\n                            }\n                            return true;\n                        }\n                );\n            };\n        }\n    };\n});"],"sourceRoot":"/source/"}